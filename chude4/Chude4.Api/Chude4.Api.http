@Chude4.Api_HostAddress = https://localhost:7105

# ==========================================================
# Admin user flow (should pass /admin and /age18)
# ==========================================================

### (Admin) Register: user + role Admin + age=18
POST {{Chude4.Api_HostAddress}}/auth/register
Content-Type: application/json

{
  "email": "admin@a.com",
  "password": "123456",
  "role": "Admin",
  "age": 18
}

### (Admin) Login -> get JWT
# @name admin_login
POST {{Chude4.Api_HostAddress}}/auth/login
Content-Type: application/json

{
  "email": "admin@a.com",
  "password": "123456"
}

@admin_token = {{admin_login.response.body.$.accessToken}}

### (Admin) /me (200)
GET {{Chude4.Api_HostAddress}}/me
Authorization: Bearer {{admin_token}}

### (Admin) /admin (200)
GET {{Chude4.Api_HostAddress}}/admin
Authorization: Bearer {{admin_token}}

### (Admin) /age18 (200)
GET {{Chude4.Api_HostAddress}}/age18
Authorization: Bearer {{admin_token}}


# ==========================================================
# Normal user flow (should fail /admin, and fail /age18 if age < 18)
# ==========================================================

### (User) Register: no role, age=17
POST {{Chude4.Api_HostAddress}}/auth/register
Content-Type: application/json

{
  "email": "user@a.com",
  "password": "123456",
  "role": null,
  "age": 17
}

### (User) Login -> get JWT
# @name user_login
POST {{Chude4.Api_HostAddress}}/auth/login
Content-Type: application/json

{
  "email": "user@a.com",
  "password": "123456"
}

@user_token = {{user_login.response.body.$.accessToken}}

### (User) /me (200)
GET {{Chude4.Api_HostAddress}}/me
Authorization: Bearer {{user_token}}

### (User) /admin (403 Forbidden)
GET {{Chude4.Api_HostAddress}}/admin
Authorization: Bearer {{user_token}}

### (User) /age18 (403 Forbidden)
GET {{Chude4.Api_HostAddress}}/age18
Authorization: Bearer {{user_token}}
